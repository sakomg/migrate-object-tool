<template>
  <lightning-accordion class="container-accordion" allow-multiple-sections-open active-section-name={activeSections}>
    <lightning-accordion-section name="step-1" label="Step 1" class="slds-is-relative">
      <div id="step-1">
        <c-migrate-object-tool-choose-objects
          loading={loadingObj.step1}
          current-s-object-name={currentSObjectName}
          current-big-object-name={currentBigObjectName}
          s-object-name-options={sObjectNameOptions}
          big-object-name-options={bigObjectNameOptions}
        ></c-migrate-object-tool-choose-objects>
      </div>
    </lightning-accordion-section>

    <lightning-accordion-section name="step-2" label="Step 2" class="slds-is-relative">
      <div id="step-2">
        <div if:true={loadingObj.step2}>
          <lightning-spinner alternative-text="Loading..." size="small"></lightning-spinner>
        </div>
        <div>
          <i>Choose fields to transfer data.</i>
        </div>
        <div class="pair-container">
          <div class="pair">
            <div class="drop-icon"></div>
            <p class="slds-form-element__label">From Field</p>
            <p class="slds-form-element__label">To Field</p>
            <div class="delete-icon"></div>
            <div class="indicator-icon"></div>
          </div>

          <template for:each={fieldPairs} for:item="pair" for:index="idx">
            <div
              draggable="true"
              class="drag"
              key={pair.index}
              ondragstart={drag.start}
              ondragover={drag.over}
              ondragend={handleDragEnd}
              data-index={idx}
            >
              <c-migrate-object-tool-field-pair
                pair={pair}
                so-field-options={soFieldOptions}
                bo-field-options={boFieldOptions}
                onfieldchange={handleObjectFieldChange}
                ondeletepair={handleDeleteIconClick}
              ></c-migrate-object-tool-field-pair>
            </div>
          </template>
        </div>
      </div>
    </lightning-accordion-section>

    <lightning-accordion-section name="step-3" label="Step 3" class="slds-is-relative">
      <div id="step-3">
        <c-migrate-object-tool-conditions
          loading={loadingObj.step3}
          request-user-query={requestUserQuery}
          response-user-query={responseUserQuery}
        ></c-migrate-object-tool-conditions>
      </div>
    </lightning-accordion-section>

    <lightning-accordion-section name="step-4" label="Step 4" class="slds-is-relative">
      <div id="step-4">
        <c-migrate-object-tool-recurrence loading={loadingObj.step4}></c-migrate-object-tool-recurrence>
      </div>
    </lightning-accordion-section>
  </lightning-accordion>
</template>
